<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../d2l-colors/d2l-colors.html">

<dom-module id="d2l-loading-spinner">
	<template>
		<style>
			:host {
				color: var(--d2l-loading-spinner-color, --d2l-color-celestine);
				display: inline-block;
			}

			:host .d2l-loading-spinner-wrapper {
				height: var(--d2l-loading-spinner-size, 50px);
				margin: auto;
				overflow: hidden;
				position: relative;
				width: var(--d2l-loading-spinner-size, 50px);
			}

			:host .d2l-loading-spinner-bg {
				height: 100%;
				position: absolute;
				stroke: var(--d2l-loading-spinner-color, --d2l-color-celestine);
				top: 0;
				width: 100%;
			}

			:host .d2l-loading-spinner-slice1,
			:host .d2l-loading-spinner-slice2,
			:host .d2l-loading-spinner-slice3,
			:host .d2l-loading-spinner-slice4,
			:host .d2l-loading-spinner-slice5 {
				animation-duration: 1.5s;
				animation-iteration-count: infinite;
				animation-timing-function: cubic-bezier(.5,0,.5,1);
				height: 50%;
				position: absolute;
				top: 0;
				transform-origin: left bottom;
				left: 50%;
				width: 50%;
			}

			:host .d2l-loading-spinner-slice1 {
				animation-name: slicespin1;
				transform: rotate(54deg);
			}
			:host .d2l-loading-spinner-slice2 {
				animation-name: slicespin2;
				transform: rotate(124deg);
			}
			:host .d2l-loading-spinner-slice3 {
				animation-name: slicespin3;
				transform: rotate(198deg);
			}
			:host .d2l-loading-spinner-slice4 {
				animation-name: slicespin4;
				transform: rotate(270deg);
			}
			:host .d2l-loading-spinner-slice5 {
				animation-name: slicespin5;
				transform: rotate(344deg);
			}

			@keyframes slicespin1 {
				0% { transform: rotate(54deg); }
				80%, 100% { transform: rotate(430deg); }
			}

			@keyframes slicespin2 {
				0%, 10% { transform: rotate(124deg); }
				80%, 100% { transform: rotate(500deg); }
			}

			@keyframes slicespin3 {
				0%, 20% { transform: rotate(198deg); }
				80%, 100% { transform: rotate(574deg); }
			}

			@keyframes slicespin4 {
				0%, 35%{ transform: rotate(270deg); }
				80%, 100% { transform: rotate(644deg); }
			}

			@keyframes slicespin5 {
				0%, 60%, { transform: rotate(344deg); }
				80%, 100% { transform: rotate(720deg); }
			}

		</style>
		<div class="d2l-loading-spinner-wrapper">
			<svg viewBox="0 0 42 42" class="d2l-loading-spinner-bg" focusable="false">
				<g fill="none" fill-rule="evenodd" transform="translate(5 5)">
					<filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="shadow">
						<feOffset dx="0" dy="0" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
						<feGaussianBlur stdDeviation="4" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
						<feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.07 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1"></feColorMatrix>
						<feMerge>
							<feMergeNode in="shadowMatrixOuter1"></feMergeNode>
							<feMergeNode in="SourceGraphic"></feMergeNode>
						</feMerge>
					</filter>
					<circle stroke="none" fill="#FFF" cx="16" cy="16" r="16" filter="url(#shadow)"/>
					<circle stroke-width="2" cx="16" cy="16" r="11"/>
				</g>
			</svg>
			<svg viewBox="0 0 42 42" class="d2l-loading-spinner-slice1" focusable="false">
				<g fill="none" fill-rule="evenodd">
					<path d="M24 42h8c0-17.673-14.327-32-32-32v8c1.105 0 2 .895 2 2s-.895 2-2 2v20h20c0-1.105.895-2 2-2s2 .895 2 2z" fill="#FFF"/>
					<path d="M0 22c1.105 0 2-.895 2-2s-.895-2-2-2c13.255 0 24 10.745 24 24 0-1.105-.895-2-2-2s-2 .895-2 2c0-11.046-8.954-20-20-20z" fill="#E6EAF0"/>
				</g>
			</svg>
			<svg viewBox="0 0 42 42" class="d2l-loading-spinner-slice2" focusable="false">
				<g fill="none" fill-rule="evenodd">
					<path d="M24 42h8c0-17.673-14.327-32-32-32v8c1.105 0 2 .895 2 2s-.895 2-2 2v20h20c0-1.105.895-2 2-2s2 .895 2 2z" fill="#FFF"/>
					<path d="M0 22c1.105 0 2-.895 2-2s-.895-2-2-2c13.255 0 24 10.745 24 24 0-1.105-.895-2-2-2s-2 .895-2 2c0-11.046-8.954-20-20-20z" fill="#E6EAF0"/>
				</g>
			</svg>
			<svg viewBox="0 0 42 42" class="d2l-loading-spinner-slice3" focusable="false">
				<g fill="none" fill-rule="evenodd">
					<path d="M24 42h8c0-17.673-14.327-32-32-32v8c1.105 0 2 .895 2 2s-.895 2-2 2v20h20c0-1.105.895-2 2-2s2 .895 2 2z" fill="#FFF"/>
					<path d="M0 22c1.105 0 2-.895 2-2s-.895-2-2-2c13.255 0 24 10.745 24 24 0-1.105-.895-2-2-2s-2 .895-2 2c0-11.046-8.954-20-20-20z" fill="#E6EAF0"/>
				</g>
			</svg>
			<svg viewBox="0 0 42 42" class="d2l-loading-spinner-slice4" focusable="false">
				<g fill="none" fill-rule="evenodd">
					<path d="M24 42h8c0-17.673-14.327-32-32-32v8c1.105 0 2 .895 2 2s-.895 2-2 2v20h20c0-1.105.895-2 2-2s2 .895 2 2z" fill="#FFF"/>
					<path d="M0 22c1.105 0 2-.895 2-2s-.895-2-2-2c13.255 0 24 10.745 24 24 0-1.105-.895-2-2-2s-2 .895-2 2c0-11.046-8.954-20-20-20z" fill="#E6EAF0"/>
				</g>
			</svg>
			<svg viewBox="0 0 42 42" class="d2l-loading-spinner-slice5" focusable="false">
				<g fill="none" fill-rule="evenodd">
					<path d="M24 42h8c0-17.673-14.327-32-32-32v8c1.105 0 2 .895 2 2s-.895 2-2 2v20h20c0-1.105.895-2 2-2s2 .895 2 2z" fill="#FFF"/>
					<path d="M0 22c1.105 0 2-.895 2-2s-.895-2-2-2c13.255 0 24 10.745 24 24 0-1.105-.895-2-2-2s-2 .895-2 2c0-11.046-8.954-20-20-20z" fill="#E6EAF0"/>
				</g>
			</svg>
		</div>
	</template>
	<script>
	Polymer({
		is: 'd2l-loading-spinner',
		properties: {
			color: {
				observer: '_colorChanged',
				type: String
			},
			size: {
				observer: '_sizeChanged',
				type: Number
			}
		},
		_colorChanged: function(newColor) {
			this.customStyle['--d2l-loading-spinner-color'] = newColor;
			this.updateStyles();
		},
		_sizeChanged: function(newSize) {
			this.customStyle['--d2l-loading-spinner-size'] = newSize + 'px';
			this.updateStyles();
		}
	});
	</script>
</dom-module>
